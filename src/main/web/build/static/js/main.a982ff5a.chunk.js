(this["webpackJsonpreactjs-jwt-authentication"]=this["webpackJsonpreactjs-jwt-authentication"]||[]).push([[0],{34:function(e,t,n){},55:function(e,t,n){},87:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),s=n(18),c=n.n(s),i=(n(55),n(7)),o=n(8),l=n(10),j=n(9),u=n(110),h=n(112),d=n(108),m=(n(34),n(27)),b=n(90),O=n(91),p=n(93),f=n(94),x=n(95),g=n(96),v=n(97),w=n(98),y=n(92),k=n(111),S=n(14),C=n.n(S),U=n(19),E=n(20),T=n.n(E),P=new(function(){function e(){Object(i.a)(this,e),this.signin=function(e,t){return T.a.post("/api/auth/signin",{username:e,password:t}).then((function(e){return e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data})).catch((function(e){throw console.log(e),e}))},this.register=function(){var e=Object(U.a)(C.a.mark((function e(t,n,a,r,s){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T.a.post("/api/auth/signup",{firstname:t,lastname:n,username:a,email:r,password:s}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,a,r,s){return e.apply(this,arguments)}}()}return Object(o.a)(e,[{key:"signOut",value:function(){localStorage.removeItem("user")}},{key:"getCurrentUser",value:function(){return JSON.parse(localStorage.getItem("user"))}}]),e}()),L=n(2),N=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).signOut=function(){P.signOut(),a.props.history.push("/home"),window.location.reload()},a.state={isOpen:!1},a.toggle=a.toggle.bind(Object(m.a)(a)),a.state={showUser:!1,showPM:!1,showAdmin:!1,username:void 0,login:!1},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=P.getCurrentUser();if(e){var t=[];e.authorities.forEach((function(e){t.push(e.authority)})),this.setState({showUser:!0,showPM:t.includes("ROLE_PM")||t.includes("ROLE_ADMIN"),showAdmin:t.includes("ROLE_ADMIN"),login:!0,username:e.username})}}},{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return Object(L.jsxs)(b.a,{color:"dark",dark:!0,expand:"md",children:[Object(L.jsx)(O.a,{tag:y.a,to:"/home",children:"Loizenai.com"}),Object(L.jsxs)(p.a,{className:"mr-auto",children:[Object(L.jsx)(f.a,{href:"/home",children:"Home"}),this.state.showUser&&Object(L.jsx)(f.a,{href:"/user",children:"User"}),this.state.showPM&&Object(L.jsx)(f.a,{href:"/pm",children:"PM"}),this.state.showAdmin&&Object(L.jsx)(f.a,{href:"/admin",children:"Admin"})]}),Object(L.jsx)(x.a,{onClick:this.toggle}),Object(L.jsx)(g.a,{isOpen:this.state.isOpen,navbar:!0,children:this.state.login?Object(L.jsxs)(p.a,{className:"ml-auto",navbar:!0,children:[Object(L.jsx)(v.a,{children:Object(L.jsxs)(w.a,{children:["Signed in as: ",Object(L.jsx)("a",{href:"/profile",children:this.state.username})]})}),Object(L.jsx)(v.a,{children:Object(L.jsx)(f.a,{href:"#",onClick:this.signOut,children:"SignOut"})})]}):Object(L.jsxs)(p.a,{className:"ml-auto",navbar:!0,children:[Object(L.jsx)(v.a,{children:Object(L.jsx)(f.a,{href:"/signin",children:"Login"})}),Object(L.jsx)(v.a,{children:Object(L.jsx)(f.a,{href:"/signup",children:"SignUp"})})]})})]})}}]),n}(a.Component),I=Object(k.a)(N),A=n(99),F=n(100),M=n(109),D=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){return Object(i.a)(this,n),t.call(this,e)}return Object(o.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return Object(L.jsxs)("div",{children:[Object(L.jsx)(I,{}),Object(L.jsx)(A.a,{fluid:!0,children:Object(L.jsx)("div",{style:{marginTop:"20px"},children:Object(L.jsxs)(M.a,{variant:"primary",children:[Object(L.jsx)("h2",{children:"Reactjs JWT Authentication Application"}),Object(L.jsx)(F.a,{color:"success",children:Object(L.jsx)(y.a,{to:"/signin",children:Object(L.jsx)("span",{style:{color:"white"},children:"Login"})})})]})})})]})}}]),n}(a.Component),B=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={user:void 0},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=P.getCurrentUser();this.setState({user:e})}},{key:"render",value:function(){var e="",t=this.state.user;if(t&&t.accessToken){var n="";t.authorities.forEach((function(e){n=n+" "+e.authority})),e=Object(L.jsx)("div",{style:{marginTop:"20px"},children:Object(L.jsxs)(M.a,{variant:"info",children:[Object(L.jsx)("h2",{children:"User Info"}),Object(L.jsxs)("ul",{children:[Object(L.jsxs)("li",{children:["Username: ",t.username]}),Object(L.jsxs)("li",{children:["Access Token: ",t.accessToken]}),Object(L.jsxs)("li",{children:["Authorities: ",n]})]})]})})}else e=Object(L.jsx)("div",{style:{marginTop:"20px"},children:Object(L.jsxs)(M.a,{variant:"primary",children:[Object(L.jsx)("h2",{children:"Profile Component"}),Object(L.jsx)(F.a,{color:"success",children:Object(L.jsx)(y.a,{to:"/signin",children:Object(L.jsx)("span",{style:{color:"white"},children:"Login"})})})]})});return Object(L.jsxs)("div",{children:[Object(L.jsx)(I,{}),Object(L.jsx)(A.a,{fluid:!0,children:e})]})}}]),n}(a.Component);T.a.interceptors.request.use((function(e){var t=JSON.parse(localStorage.getItem("user"));if(t&&t.accessToken){var n="Bearer "+t.accessToken;e.headers.Authorization=n}return e}));var H=new(function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,[{key:"getUserBoard",value:function(){var e=Object(U.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/api/test/user");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getPmBoard",value:function(){var e=Object(U.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/api/test/pm");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getAdminBoard",value:function(){var e=Object(U.a)(C.a.mark((function e(){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.get("/api/test/admin");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]),e}()),J=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={content:"",error:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;H.getUserBoard().then((function(t){e.setState({content:t.data})}),(function(t){console.log(t),e.setState({error:t.toString()})}))}},{key:"render",value:function(){return Object(L.jsxs)("div",{children:[Object(L.jsx)(I,{}),Object(L.jsx)(A.a,{fluid:!0,children:this.state.content?Object(L.jsx)("div",{style:{marginTop:"20px"},children:Object(L.jsx)(M.a,{variant:"info",children:Object(L.jsx)("h2",{children:this.state.content})})}):Object(L.jsx)("div",{style:{marginTop:"20px"},children:Object(L.jsx)(M.a,{variant:"danger",children:this.state.error})})})]})}}]),n}(a.Component),R=n(113),z=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={content:"",error:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;H.getPmBoard().then((function(t){e.setState({content:t.data})}),(function(t){console.log(t),e.setState({error:t.toString()})}))}},{key:"render",value:function(){return Object(L.jsxs)("div",{children:[Object(L.jsx)(I,{}),Object(L.jsx)(A.a,{fluid:!0,children:this.state.content?Object(L.jsx)("div",{style:{marginTop:"20px"},children:Object(L.jsx)(R.a,{color:"info",children:Object(L.jsx)("h2",{children:this.state.content})})}):Object(L.jsx)("div",{style:{marginTop:"20px"},children:Object(L.jsx)(R.a,{color:"danger",children:this.state.error})})})]})}}]),n}(a.Component),q=n(30),_=n(101),W=n(102),$=n(103),G=n(104),K=n(105),Q=n(106),V=RegExp(/^(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i),X=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).changeHandler=function(e){var t=e.target,n=t.name,r=t.value,s=a.state.errors;switch(n){case"firstname":s.firstname=r.length<3?"FirstName must be 3 characters long!":"";break;case"lastname":s.lastname=r.length<3?"LastName must be 3 characters long!":"";break;case"username":s.username=r.length<5?"Username must be 5 characters long!":"";break;case"email":s.email=V.test(r)?"":"Email is not valid!";break;case"password":s.password=r.length<8?"Password must be 8 characters long!":""}a.setState(Object(q.a)({errors:s},n,r),(function(){console.log(s)}))},a.signUp=function(e){e.preventDefault();var t=function(e){var t=!0;return Object.values(e).forEach((function(e){return e.length>0&&(t=!1)})),t}(a.state.errors);a.setState({validForm:t}),t&&P.register(a.state.firstname,a.state.lastname,a.state.username,a.state.email,a.state.password).then((function(e){a.setState({message:e.data.message,successful:!0})}),(function(e){console.log("Fail! Error = "+e.toString()),a.setState({successful:!1,message:e.toString()})}))},a.state={firstname:"",lastname:"",username:"",email:"",password:"",message:"",successful:!1,validForm:!0,errors:{firstname:"",lastname:"",username:"",email:"",password:""}},a}return Object(o.a)(n,[{key:"render",value:function(){var e=Object(L.jsx)("h2",{children:"Register User"}),t=this.state.errors,n="";return this.state.message&&(n=this.state.successful?Object(L.jsx)(M.a,{variant:"success",children:this.state.message}):Object(L.jsx)(M.a,{variant:"danger",children:this.state.message})),Object(L.jsxs)("div",{children:[Object(L.jsx)(I,{}),Object(L.jsx)(A.a,{fluid:!0,children:Object(L.jsx)(_.a,{children:Object(L.jsxs)(W.a,{sm:"12",md:{size:4,offset:4},children:[e,Object(L.jsxs)($.a,{onSubmit:this.signUp,children:[Object(L.jsxs)(G.a,{controlId:"forFirstname",children:[Object(L.jsx)(K.a,{for:"firstname",children:"First Name"}),Object(L.jsx)(Q.a,{type:"text",placeholder:"Enter First Name",name:"firstname",id:"firstname",value:this.state.firstname,autoComplete:"firstname",onChange:this.changeHandler}),t.firstname&&Object(L.jsx)(M.a,{variant:"danger",children:t.firstname})]}),Object(L.jsxs)(G.a,{controlId:"forLastname",children:[Object(L.jsx)(K.a,{for:"lastname",children:"Last Name"}),Object(L.jsx)(Q.a,{type:"text",placeholder:"Enter Last Name",name:"lastname",id:"lastname",value:this.state.lastname,autoComplete:"lastname",onChange:this.changeHandler}),t.lastname&&Object(L.jsx)(M.a,{variant:"danger",children:t.firstname})]}),Object(L.jsxs)(G.a,{controlId:"forUsername",children:[Object(L.jsx)(K.a,{for:"username",children:"Username"}),Object(L.jsx)(Q.a,{type:"text",placeholder:"Enter UserName",name:"username",id:"username",value:this.state.username,autoComplete:"username",onChange:this.changeHandler}),t.username&&Object(L.jsx)(M.a,{variant:"danger",children:t.username})]}),Object(L.jsxs)(G.a,{controlId:"formEmail",children:[Object(L.jsx)(K.a,{for:"email",children:"Email"}),Object(L.jsx)(Q.a,{required:!0,type:"text",placeholder:"Enter Email",name:"email",id:"email",value:this.state.email,autoComplete:"email",onChange:this.changeHandler}),t.email&&Object(L.jsx)(M.a,{variant:"danger",children:t.email})]}),Object(L.jsxs)(G.a,{controlId:"formPassword",children:[Object(L.jsx)(K.a,{for:"password",children:"Password"}),Object(L.jsx)(Q.a,{required:!0,type:"password",placeholder:"Enter Password",name:"password",id:"password",value:this.state.password,autoComplete:"password",onChange:this.changeHandler}),t.password&&Object(L.jsx)(M.a,{variant:"danger",children:t.password},"errorspassword")]}),Object(L.jsx)(F.a,{variant:"primary",type:"submit",children:"Create"}),!this.state.validForm&&Object(L.jsx)(M.a,{variant:"danger",children:"Please check the inputs again!"},"validForm"),n]})]})})})]})}}]),n}(a.Component),Y=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={content:"",error:""},a}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;H.getAdminBoard().then((function(t){e.setState({content:t.data})}),(function(t){console.log(t),e.setState({error:t.toString()})}))}},{key:"render",value:function(){return Object(L.jsxs)("div",{children:[Object(L.jsx)(I,{}),Object(L.jsx)(A.a,{fluid:!0,children:this.state.content?Object(L.jsx)("div",{style:{marginTop:"20px"},children:Object(L.jsx)(R.a,{variant:"info",children:Object(L.jsx)("h2",{children:this.state.content})})}):Object(L.jsx)("div",{style:{marginTop:"20px"},children:Object(L.jsx)(R.a,{variant:"danger",children:this.state.error})})})]})}}]),n}(a.Component),Z=n(107),ee=n.p+"static/media/avatar.79bfd233.png",te=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).changeHandler=function(e){var t=e.target.name,n=e.target.value;a.setState(Object(q.a)({},t,n))},a.doLogin=function(){var e=Object(U.a)(C.a.mark((function e(t){return C.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),P.signin(a.state.username,a.state.password).then((function(){a.props.history.push("/profile")}),(function(e){console.log("Login fail: error = { "+e.toString()+" }"),a.setState({error:"Can not signin successfully ! Please check username/password again"})}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.state={username:"",password:"",error:""},a}return Object(o.a)(n,[{key:"render",value:function(){return Object(L.jsxs)("div",{children:[Object(L.jsx)(I,{}),Object(L.jsx)(A.a,{fluid:!0,children:Object(L.jsx)(_.a,{style:{marginTop:"20px"},children:Object(L.jsxs)(W.a,{sm:"12",md:{size:3,offset:4},children:[Object(L.jsx)("div",{style:{marginBottom:"10px"},children:Object(L.jsx)("img",{src:ee,alt:"Avatar",className:"avatar center",style:{width:"50%",height:"auto"}})}),Object(L.jsxs)($.a,{onSubmit:this.doLogin,children:[Object(L.jsxs)(G.a,{children:[Object(L.jsx)(K.a,{for:"username",children:Object(L.jsx)("strong",{children:"Username"})}),Object(L.jsx)(Q.a,{autoFocus:!0,type:"text",name:"username",id:"username",value:this.state.username,placeholder:"Enter Username",autoComplete:"username",onChange:this.changeHandler})]}),Object(L.jsxs)(G.a,{children:[Object(L.jsx)(K.a,{for:"password",children:Object(L.jsx)("strong",{children:"Password"})}),Object(L.jsx)(Q.a,{type:"password",name:"password",id:"password",value:this.state.password,placeholder:"Enter Password",autoComplete:"password",onChange:this.changeHandler})]}),Object(L.jsx)(Z.a,{type:"submit",variant:"primary",size:"lg",block:!0,children:"Sign In"}),this.state.error&&Object(L.jsx)(R.a,{color:"danger",children:this.state.error})]})]})})})]})}}]),n}(a.Component),ne=function(e){Object(l.a)(n,e);var t=Object(j.a)(n);function n(){return Object(i.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){return Object(L.jsx)(u.a,{children:Object(L.jsxs)(h.a,{children:[Object(L.jsx)(d.a,{path:"/",exact:!0,component:D}),Object(L.jsx)(d.a,{path:"/home",exact:!0,component:D}),Object(L.jsx)(d.a,{path:"/profile",exact:!0,component:B}),Object(L.jsx)(d.a,{path:"/user",exact:!0,component:J}),Object(L.jsx)(d.a,{path:"/pm",exact:!0,component:z}),Object(L.jsx)(d.a,{path:"/admin",exact:!0,component:Y}),Object(L.jsx)(d.a,{path:"/signin",exact:!0,component:te}),Object(L.jsx)(d.a,{path:"/signup",exact:!0,component:X})]})})}}]),n}(a.Component),ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,114)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),s(e),c(e)}))};n(86);c.a.render(Object(L.jsx)(r.a.StrictMode,{children:Object(L.jsx)(ne,{})}),document.getElementById("root")),ae()}},[[87,1,2]]]);
//# sourceMappingURL=main.a982ff5a.chunk.js.map